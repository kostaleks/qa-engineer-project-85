---
- summary: |
    Пробная игра без регистрации и авторизации
  requirement: |
    Пользователь должен иметь возможность начать игру без регистрации и авторизации
  prerequisites: |
    empty
  test-data: |
    no-data
  steps:
    - Нажать на кнопку Try simple battle
  expected-result: |
    Игра без регистрации успешно создана

- summary: |
    Регистрация на сайте
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться на сайте
  prerequisites: |
    Открыть форму регистрации кнопкой Sign up
  test-data: |
    no-data
  steps:
    - Ввести любое имя, например opsss
    - Ввести любую почту, например e.a@bk.ru
    - Ввести любой пароль, например 888888
    - Ввести пароль повторно
    - Нажать кнопку Submit
  expected-result: |
    Пользователь успешно зарегистрирован

- summary: |
    Повторная регистрация зарегистрированного пользователя 
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться на сайте
  prerequisites: |
    Пользователь с тестовыми данными зарегистрирован, но не авторизован
    Открыть форму регистрации кнопкой Sign up
  test-data: |
    Nickname = ooopsss 
    Email = k.e.a@bk.ru 
    Password = 88888888
  steps:
    - Ввести имя пользователя
    - Ввести почту пользователя
    - Ввести пароль 
    - Ввести пароль повторно
    - Нажать кнопку Submit
  expected-result: |
    Регистрация невозможна, пользователь существует    

- summary: |
    Авторизация по email
  requirement: |
    Пользователь должен иметь возможность войти в игру с помощью email, Github или Discord
  prerequisites: |
    Открыть форму авторизации Sign in
  test-data: |
    Email = k.e.a@bk.ru 
    Password = 88888888
  steps:
    - Ввести почту
    - Ввести пароль
    - Нажать кнопку Submit
  expected-result: |
    Авторизация успешна 

- summary: |
    Авторизация с незарегистрированным email 
  requirement: |
    Пользователь должен иметь возможность войти в игру с помощью email, Github или Discord
  prerequisites: |
    Открыть форму авторизации Sign in
  test-data: |
    Email = lala@lala.la 
    Password = 88888888
  steps:
    - Ввести незарегистрированный email 
    - Ввести пароль
    - Нажать кнопку Submit
  expected-result: |
    Авторизация не происходит. EMAIL_NOT_FOUND 

- summary: |
    Авторизация через аккаунт Github
  requirement: |
    Пользователь должен иметь возможность войти в игру с помощью email, Github или Discord
  prerequisites: |
    Зарегистрироваться на Github
    Открыть форму авторизации Sign in
  test-data: |
    no-data
  steps:
    - Нажать кнопку Sign in with Github
  expected-result: |
    Авторизация успешна 

- summary: |
    Авторизация через аккаунт Discord
  requirement: |
    Пользователь должен иметь возможность войти в игру с помощью email, Github или Discord
  prerequisites: |
    Зарегистрироваться на Discord
    Открыть форму авторизации Sign in
  test-data: |
    no-data
  steps:
    - Нажать кнопку Sign in with Discord
  expected-result: |
    Авторизация успешна

- summary: |
    Создание игры с ботом с уровнем сложности 3
  requirement: |
    Пользователь должен иметь возможность выбрать уровень сложности игры
  prerequisites: |
    Пользователь авторизован
  test-data: |
    no-data
  steps:
    - Нажать Create game
    - Нажать game type with a bot
    - Выбрать уровень сложности 3
    - Начать игру
  expected-result: |
    Игра с выбранным уровнем создана
    
- summary: |
    Продолжительность игры
  requirement: |
    Пользователь должен иметь возможность выбрать продолжительность игры
  prerequisites: |
    Пользователь авторизован
  test-data: |
    time control 20 min
  steps:
    - Нажать Create game
    - Выбрать game type with a bot
    - Выбрать time control 20 min
    - Начать игру
  expected-result: |
    Продолжительность игры соответствует выбранной

- summary: |
    Возможность выбора задачи
  requirement: |
    Пользователь должен иметь возможность выбрать любую задачу или сыграть в случайную
  prerequisites: |
    Пользователь авторизован
  test-data: |
    rect_area
  steps:
    - Нажать Create game
    - Выбрать game type with a bot
    - Выбрать в раскрывающемся списке task's name задачу с названием rect_area
    - Начать игру
  expected-result: |
    Открывается страница игры с выбранной задачей

- summary: |
    Случайная задача
  requirement: |
    Пользователь должен иметь возможность выбрать любую задачу или сыграть в случайную
  prerequisites: |
    Пользователь авторизован
  test-data: |
    no-data
  steps:
    - Нажать Create game
    - Выбрать game type with a bot
    - Начать игру
    - Завершить игру
    - Повторить первые три шага
  expected-result: | 
    Первая и вторая задачи разные, происходит случайный выбор

- summary: |
    Фильтрация задач по тегам
  requirement: |
    Пользователь должен иметь возможность выбрать задачи с определенным тегом
  prerequisites: |
    Пользователь авторизован
  test-data: |
    level 4
    game type with a bot
    tags math
  steps:
    - Нажать Create game
    - Выбрать уровень сложности 4
    - Выбрать game type with a bot
    - Выбрать тег math
    - Начать игру
  expected-result: |
    Открывается либо задача euler_totient_function, либо задача levenshtein_distance    

- summary: |
    Игра с другим пользователем
  requirement: |
    Пользователь должен иметь возможность выбрать тип игры с другим пользователем, с другом или с ботом
  prerequisites: |
    Пользователь авторизован
  test-data: |
    no-data
  steps:
    - Нажать Create game
    - Выбрать game type with other users
    - Нажать create battle
  expected-result: |
    В лобби появляется приглашение на бой любому пользователю

- summary: |
    Игра с другом
  requirement: |
    Пользователь должен иметь возможность выбрать тип игры с другим пользователем, с другом или с ботом
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Друг никнейм lalala, емейл dog@dog.gav, пароль 12345678
  steps:
    - Нажать Create game
    - Выбрать game type with a friend
    - Выбрать друга из раскрывающегося списка или написать имя друга lalala
    - Нажать create battle 
    - Принять приглашение другом
  expected-result: |
    Игра с другом успешно создана
 
- summary: |
    Приглашение на бой другого игрока
  requirement: |
    Пользователь должен иметь возможность пригласить на бой другого игрока
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Другой игрок никнейм lalala, емейл dog@dog.gav, пароль 12345678
  steps:
    - Выбрать игрока в списке онлайн
    - Нажать на никнейм игрока
    - Выбрать send a invite
    - Принять приглашение другим игроком
  expected-result: |
    Игра с другим игроком успешно создана  

- summary: |
    Сообщения в общий чат
  requirement: |
    Пользователь должен иметь возможность писать сообщения в общем чате
  prerequisites: |
    Пользователь авторизован
  test-data: |
    no-data
  steps:
    - В форме сообщений написать сообщение в чат General 
    - Нажать send 
  expected-result: |
    Сообщение появляется в общем чате. Его видят все пользователи 

- summary: |
    Личное сообщение другому игроку
  requirement: |
    Пользователь должен иметь возможность написать личное сообщение другому игроку
  prerequisites: |
    Пользователь авторизован
  test-data: |
     Другой игрок никнейм lalala, емейл dog@dog.gav, пароль 12345678
  steps:
    - Нажать на иконку сообщения
    - Выбрать игрока lalala
    - Написать сообщение
    - Нажать send
    - Просмотреть сообщение игроком lalala
  expected-result: |
    Сообщение появляется в личном чате у обоих игроков.

- summary: |
    Сообщения в чате игры с другим игроком
  requirement: |
    Пользователь должен иметь возможность писать сообщения в чате игры с другим игроком
  prerequisites: |
    Пользователь авторизован
  test-data: |
    no-data
  steps:
    - Нажать Create game
    - Выбрать game type with a bot
    - Начать игру
    - Написать сообщение в форме сообщения
    - Нажать send
  expected-result: |
    Сообщение появляется в чате игры

- summary: |
    Выбор языка текста задачи
  requirement: |
    Пользователь должен иметь возможность выбора языка текста задачи
  prerequisites: |
    Пользователь авторизован
  test-data: |
    no-data
  steps:
    - Нажать Create game
    - Выбрать game type with a bot
    - Начать игру
    - Нажать на выпадающий список доступных языков
    - Выбрать другой язык
  expected-result: |
    Текст задачи переведен на выбранный язык   

- summary: |
    Выбор языка программирования до решения задачи
  requirement: |
    Пользователь должен иметь возможность выбора языка программирования до решения задач
  prerequisites: |
    Пользователь авторизован
  test-data: |
    no-data
  steps:
    - Нажать Create game
    - Выбрать game type with a bot
    - Начать игру
    - Нажать на раскрывающийся список доступных языков программирования
    - Выбрать желаемый язык программирования
  expected-result: |
    В окне редактора меняется исходный код на выбранный язык программирования
    
- summary: |
    Смена языка программирования во время решения задачи
  requirement: |
    Пользователь должен иметь возможность смены языка программирования во время решения задачи
  prerequisites: |
    Пользователь авторизован
  test-data: |
    no-data
  steps:
    - Нажать Create game
    - Выбрать game type with a bot
    - Начать игру
    - Написать любые пару строк кода
    - Нажать на раскрывающийся список доступных языков программирования
    - Сменить язык программирования
  expected-result: |
    В окне редактора меняется исходный код на выбранный язык программирования

- summary: |
    Возможность сдаться во время игры
  requirement: |
    Пользователь должен иметь возможность сдаться во время игры
  prerequisites: |
    Пользователь авторизован
  test-data: |
    no-data
  steps:
    - Нажать Create game
    - Выбрать game type with a bot
    - Начать игру
    - Нажать на кнопку other actions
    - Выбрать give up
    - Выбрать give up
  expected-result: |
    В игре появляется белый флаг. Игрок сдался 

- summary: |
    Возможность завершить проигранную игру
  requirement: |
    Пользователь должен иметь возможность закончить игру в случае проигрыша, дописать код, проверить правильность
  prerequisites: |
    Пользователь авторизован
  test-data: |
    no-data
  steps:
    - Нажать Create game
    - Выбрать game type with a bot
    - Начать игру
    - Дождаться выигрыша другого игрока
    - Закрыть окно с проигрышем
    - Дописать код
    - Нажать check
  expected-result: |
    Игрок может дописать и проверить код

- summary: |
    Просмотр игры других пользователей онлайн
  requirement: |
    Пользователь должен иметь возможность следить за игрой других пользователей онлайн
  prerequisites: |
    Пользователь авторизован
    Два других пользователя играют друг с другом в данный момент
  test-data: |
    no-data
  steps:
    - В лобби в строке игры нажать Show 
  expected-result: |
    Происходит переход на страницу игры онлайн    
 
- summary: |
    Просмотр завершенной игры в записи
  requirement: |
    Пользователь должен иметь возможность посмотреть завершенную игру в записи
  prerequisites: |
    Пользователь авторизован
    Пользователь закончил игру
  test-data: |
    no-data
  steps:
    - Открыть страницу hystory
    - Нажать на кнопку show у завершенной игры
  expected-result: |
    Можно посмотреть процесс игры с начала

- summary: |
    Просмотр кода соперника
  requirement: |
    Пользователь должен иметь возможность видеть код соперника во время игры
  prerequisites: |
    Пользователь авторизован
  test-data: |
    no-data
  steps:
    - Нажать Create game
    - Выбрать game type with a bot
    - Начать игру
  expected-result: |
    Можно наблюдать как соперник печатает свой код    

- summary: |
    Получение очков за выигранные игры, повышение рейтинга
  requirement: |
    Пользователь должен иметь возможность повышать свой рейтинг, получая очки за выигранные игры
  prerequisites: |
    Пользователь авторизован
  test-data: | 
    task twenty_one 
    const _ = require("lodash");
    const R = require("rambda");
    const solution = (arr) => {
    return _.sum(arr) === 21;
    };
    module.exports = solution;
  steps:
    - Нажать Create game
    - Выбрать game type with other users
    - Выбрать task twenty_one
    - Нажать create battle
    - Начать игру
    - Выбрать язык программирования Node.js 20.11.1
    - Написать код
    - Нажать check
  expected-result: | 
    В рейтинге очки прибавляются

- summary: |
    Смена никнейма
  requirement: |
    Пользователь должен иметь возможность изменить никнейм в профиле
  prerequisites: |
    Пользователь авторизован
  test-data: |
    no-data
  steps:
    - Нажать на никнейм
    - Выбрать setting
    - Сменить никнейм
    - Нажать save
    - Вернуться на главную страницу
  expected-result: |
    Никнейм сменился    
